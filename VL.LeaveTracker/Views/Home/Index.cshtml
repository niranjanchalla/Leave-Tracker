@model Vl.LeaveTracker.Models.LeaveTrackerDetails

@{
    ViewBag.Title = "Home Page";
}

@{var employeeName = " ";
  var employeeID = 0;

}
<head>
    <title></title>
    <!-- Bootstrap core CSS -->
    <link href="~/Content/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap theme -->
    <link href="~/Content/bootstrap-theme.min.css" rel="stylesheet">
</head>
<script src="~/Scripts/jquery-2.1.1.js"></script>
@*<script src="~/Scripts/jquery.popupover.js"></script>*@
<script src="~/Scripts/jquery-2.1.1.min.js"></script>
<script src="~/Scripts/jquery-ui-1.8.24.js"></script>
<script src="~/Scripts/WebScript.js"></script>
<script src="~/Scripts/jquery.ui.datepicker.js"></script>

<link href="~/Content/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
<link href="~/IndexStyle.css" rel="stylesheet" type="text/css" />
@*<script src="http://cdn.jsdelivr.net/webshim/1.12.4/extras/modernizr-custom.js"></script>
<script src="http://cdn.jsdelivr.net/webshim/1.12.4/polyfiller.js"></script>
   <link href="~/Content/themes/base/jquery.ui.datepicker.css" rel="stylesheet" />
<link href="~/Content/themes/base/jquery.ui.theme.css" rel="stylesheet" />
<link href="~/Content/themes/base/jquery.ui.core.css" rel="stylesheet" />
<link href="~/Content/themes/base/minified/jquery.ui.core.min.css" rel="stylesheet" />
<link href="~/Content/themes/base/minified/jquery.ui.theme.min.css" rel="stylesheet" />
<link href="~/Content/themes/base/minified/jquery.ui.datepicker.min.css" rel="stylesheet" />*@

<div style="text-align: center; width: 1330px;">
    Select Date: 
    <input type="date" id="inputDate" style="" />
    @*@Html.TextBoxFor(m => m.inputDate, new { @Value = @Model.inputDate.HasValue ? @Model.inputDate.Value.ToShortDateString() : DateTime.Now.ToShortDateString(), @style = "background-color: #F6FAEB", @autocomplete = "off", @class="datefield" })*@
</div>

<div class="jumbotron" style="height: 480px; background-color: #d3dce0; width: 1330px; float: left; color: black;">
    <div id="months1" style="float: left; margin: .5px; background-color: #d3dce0; width: 1270px; color: black; height: 30px;">
        <div id="menu1" style="border-spacing: 2px; float: left; width: 100px; border: 0px;">
            @for (int a = 0; a < 1; a++)
            {
                for (int b = 0; b < 1; b++)
                {                                           
                <div id="monthsMenu1" class="cellrow" style="border: 0px;">
                </div> 
                }
            }
        </div>
        <div id="menu2" style="border-spacing: 2px; float: left; width: 100px;">
            @for (int a = 0; a < 1; a++)
            {
                for (int b = 0; b < 1; b++)
                {                                           
                <div id="monthsMenu2" class="cellrow" style="border: 0px;">
                </div> 
                }
            }
        </div>
        <div id="Months" style="border-spacing: 2px; margin-right: 10px; padding-top: 10px;">
        </div>
    </div>
    <div id="days1" style="float: left; margin: .5px; background-color: #d3dce0; width: 1270px; color: black;">
        <div id="menu1" style="border-spacing: 2px; float: left; width: 100px;">
            @for (int a = 0; a < 1; a++)
            {
                for (int b = 0; b < 1; b++)
                {                                           
                <div id="daysMenu1" class="cellrow" style="border: 0px;">
                </div> 
                }
            }
        </div>
        <div id="menu2" style="border-spacing: 2px; float: left; width: 100px;">
            @for (int a = 0; a < 1; a++)
            {
                for (int b = 0; b < 1; b++)
                {                                           
                <div id="daysMenu2" class="cellrow" style="border: 0px;">
                </div> 
                }
            }
        </div>
        <div id="Days" style="border-spacing: 2px; margin-right: 10px; padding-top: 10px;">
        </div>
    </div>
    <div id="dates1" style="float: left; margin: .5px; width: 1270px; color: black; border-top: 1px solid;">
        <div id="menu1" style="border-spacing: 2px; float: left; width: 200px;">
            <div id="menu1.1" class="cellrow" style="text-align: center; width: 200px; padding-top: 5px; font-size: 11.4px; font-weight: bolder; background-color: #3499ee;">
                Employee Name
            </div>
        </div>
        <div id="menu3" style="border-spacing: 2px;">
            <div class="cellrow1" style="text-align: center; padding-top: 5px; font-size: 15px; font-weight: bold; background-color: #f895cf;">
                Total Leaves
            </div>
        </div>
        <div class="DatesDiv" id="Dates" style="border-spacing: 2px; padding-top: 7.5px;">
        </div>
    </div>
    <div id="menu1" style="height: 300px; width: 200px; float: left;">
        @for (int employeeNum = 0; employeeNum < 10; employeeNum++)
        {
            employeeName = employeeNum < Model.EmpDetails.Count ? Model.EmpDetails[employeeNum].Empname : string.Empty;
            employeeID = employeeNum < Model.EmpDetails.Count ? Model.EmpDetails[employeeNum].EmpId : 0;
            <div id="@employeeNum" class="employeeName cellrow" title="@employeeID" style="background-color: #fa978a;color:black;width:197px">@employeeName</div>
        }
    </div>
    <div id="menu3" style="height: 300px; width: 107px; float: right;">
        @for (int f = 0; f < 10; f++)
        {                                       
            <div id="@f" class="leavecount cellrow1" style="background-color: #fbfc9e;font-size:medium;color:black;">
            </div>   
        }
    </div>
    <table>
        @for (int row = 0; row < 10; row++)
        {
            <tr>
                @for (int column = 0; column < 31; column++)
                {
                    <td id="@row@column" class="cell popupCell" style="float:left; background-color:#ffc9e9;color:black;"></td>
                }
            </tr>
        }
    </table>
    <div id="menu4" style="height: 30px; width: 1300px; bottom: 0; right: 0; left: 0; position: relative; color: black;">
        <div class="cellcol" style="font-size: 18px; font-weight: bold; background-color: #0ff;">
            Total
        </div>
        @for (int g = 0; g < 31; g++)
        {
            <div id="@g"  class="cell dailyLeaves"  style="background-color:#f895cf;font-size:medium;color:black;">
            </div>   
        }
    </div>
</div>


@*<div class="Pages" id="pageId">
    <a href="#" id="stratingPage" class="startingPageClass"><<</a>  <a href="#" id="firstPage" class="badge 

firstPageClass">0</a>  <a href="#" class="badge secondPageClass" id="secondPage">1</a>   <a href="#" id="thirdPage" 

class="badge thirdPageClass">2</a>   <a href="#" id="lastPage" class="lastPageClass">>></a>
</div>*@


<script type="text/javascript">
    //var currentCelDate = new DateTime();
    //currentCelDate.AddDays(-15);
    //for (int i = 1440; i > Model.LeaveDetails.Count; i++)
    //{
    //    employeeId = Model.LeaveDetails[i].First(item => item.LeaveFrom <= currentCelDate && item.LeaveTo >=currentCelDate).EmpId;
    //    var empLeave = Model.LeaveDetails[employeeId].First(item => item.LeaveFrom <= currentCelDate && item.LeaveTo >= currentCelDate).LeaveTypeId;
    //}
    //     var leaveDetailsCount = Model.LeaveDetails.ToList().FirstOrDefault().Value;
    //    //var leaveTypeId = leaveDetails[column].LeaveTypeId;
    //    //var leaveDetails = Model.LeaveDetails.ToList().FirstOrDefault().Value;
    //    // var listempId = leaveDetailsCount.FirstOrDefault().EmpId;
    //    //var orgempId = Model.EmpDetails.ToList().Distinct();
    //     var increment = Model.LeaveDetails.Count;
    //    foreach (var item in Model.LeaveDetails)
    //    {   var leaveDetails = item.Value;
    //        for (int i = 0; i < leaveDetails.Count; i++)
    //        {

    //            var leaveTypeId = leaveDetails[i].LeaveTypeId;
    //            var leaveName = Model.LeaveTypes[leaveTypeId - 1].Ltype;

    //            var LeaveFromDate = leaveDetails[i].LeaveFrom.Value.Day;
    //            var LeaveEndDate = leaveDetails[i].LeaveTo.Value.Day;
    //            var empName = Model.EmpDetails[i].Empname;
    //            employeeId = Model.EmpDetails[i].EmpId;
    //            increment++;
    //var currentCellDate = new DateTime(2014, 10, 01);
    //currentCellDate.AddDays(-15);
    //var Leaves = row < Model.LeaveTypes.Count ? Model.LeaveTypes[row].Ltype : string.Empty; 


    //        }
    //    }



    @{
         var leaveFromDate=0;
         var leaveToDate=0;
         var leaveTypeId=0;
         var leaveName="";
         var leaveEmpId=0;
         var employeName = "";
         var leaveDetails = Model.LeaveDetails.ToList().FirstOrDefault().Value;
         leaveFromDate = leaveDetails[0].LeaveFrom.Value.Day;

         leaveToDate = leaveDetails[0].LeaveTo.Value.Day;
         leaveTypeId = leaveDetails[0].LeaveTypeId;
             leaveName = "";
             leaveEmpId = leaveDetails[0].EmpId;
             employeName = "";
            //for (int i = 0; i < Model.LeaveDetails.ToList().Count - 1; i++)
            //{

            //    leaveFromDate = leaveDetails[i].LeaveFrom.Value.Day;
            //    leaveToDate = leaveDetails[i].LeaveTo.Value.Day;
            //    leaveTypeId = leaveDetails[i].LeaveTypeId;
            //    leaveEmpId = leaveDetails[i].EmpId;
            //}
             leaveName = Model.LeaveTypes.First(item => item.Id == leaveTypeId).Ltype;
             employeName = Model.EmpDetails.First(item => item.EmpId == leaveEmpId).Empname; 

        
     }
    $(document).click(function () {
        debugger;
        var lid = "";
        var fromDateId;
        var endDateId;
        for (var i = 0; i < 30; i++) {
            if ($('#'+i+'.date').text() == '@leaveFromDate') {
                 fromDateId = $('.date').attr("id").charAt(1)+i;
            }
            if ($('#'+i+'.date').text() == '@leaveToDate') {
                endDateId = $('.date').attr("id").charAt(1) + i;
            }
    }
        for (var i = fromDateId; i <= endDateId; i++) {
            switch ('@employeName') {
                case "Niranjan": lid = '0' + i;
                    DisplayLeaves(lid, "@leaveName");
                    break;
                case "Swethna": lid = '1' + i;
                    DisplayLeaves(lid, "@leaveName");
                    break;
                case "Mounica": lid = '2' + i;
                    DisplayLeaves(lid, "@leaveName");
                    break;
                default: alert("Employee Not Found");
                    break;

                }
            }
        //DisplayLeaves(lid, "@leaveName");
        //alert($('.date').attr("id").charAt(0));

       // alert($('.dailyLeaves').attr("title"));

    });
</script>